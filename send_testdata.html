<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Catalog</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .product {
            text-align: center;
            margin-bottom: 24px;
        }
        .product .product-title {
            font-size: 16px;
            height: 3.25rem;
        }
        .product .btn {
            font-size: .75rem;
            padding: 2px;
        }
        .product img {
            max-width: 100%;
            height: 125px;
        }
        .input-group.mb-3 {
            margin-bottom: 8px;
        }
        .quantity-input {
            width: 60px;
            text-align: center;
            font-size: .75rem;
            padding: 0px;
        }
        .input-group-btn-vertical {
            position: relative;
            white-space: nowrap;
            width: 1%;
            vertical-align: middle;
            display: table-cell;
        }
        .input-group-btn-vertical > .btn {
            display: block;
            float: none;
            width: 100%;
            max-width: 100%;
            padding: 8px;
            margin-left: -1px;
            position: relative;
            border-radius: 0;
        }
        .input-group-btn-vertical > .btn:first-child {
            border-top-right-radius: 4px;
        }
        .input-group-btn-vertical > .btn:last-child {
            margin-top: -2px;
            border-bottom-right-radius: 4px;
        }
        .input-group-btn-vertical i {
            position: absolute;
            top: 0;
            left: 4px;
        }
        .input-group-btn-vertical .btn {
            padding: 6px 10px;
            font-size: 12px;
        }
        .row {
          display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display:         flex;
          flex-wrap: wrap;
        }
        .row > [class*='col-'] {
          display: flex;
          flex-direction: column;
        }
    </style>
</head>
<body>
    <div class="container">
    </div>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>

    <script>
        let payloads = [
            {
                "stick": 64,
                "offering": "FALSE",
                "slof": 10,
                "bal": 100,
                "max_allocation": 1,
                "stocks": 100,
                "show_first": true,
                "sub_family_display_sort": 0,
                "region": "RE Bogor",
                "insertedDate": "2023-08-18T07:05:46.351Z",
                "display_sort": 1,
                "sub_family": "Others",
                "__id": "64df184ab1402e000805ac08",
                "name": "Program Berkah",
                "@version": "1",
                "sku_id": "PPU",
                "@timestamp": "2023-08-18T07:05:46.359Z",
                "image": "https://cdn.yellowmessenger.com/C4qw1oaDiTZb1687171383495.png,200,120",
                "aliases": "pilihan untung, paket untung, paket komplit, pilihan, paket",
                "updatedDate": "2023-08-18T07:05:46.351Z",
                "unit_price": 105700,
                "karton": 1000
            },
            {
                "stick": 12,
                "offering": "FALSE",
                "slof": 10,
                "bal": 100,
                "max_allocation": 1000000,
                "stocks": 100,
                "show_first": true,
                "sub_family_display_sort": 0,
                "region": "RE Bogor",
                "insertedDate": "2023-08-18T07:05:47.318Z",
                "display_sort": 2,
                "sub_family": "Dji Sam Soe",
                "__id": "64df184b77751300082c6273",
                "name": "Dji Sam Soe 12",
                "@version": "1",
                "sku_id": "DSS12",
                "@timestamp": "2023-08-18T07:05:47.324Z",
                "image": "https://cdn.yellowmessenger.com/bb9SifpESrzP1662985778209.jpg",
                "aliases": "sokam dua belas, dua tiga empat",
                "updatedDate": "2023-08-18T07:05:46.351Z",
                "unit_price": 17300,
                "karton": 1000
            }
        ] 

        const params = new URLSearchParams();
        payloads.forEach((obj, index) => {
            for (const key in obj) {
                if (obj.hasOwnProperty(key)) {
                    params.append(`param_${index}[${key}]`, obj[key]);
                }
            }
        });
        console.log('params :', params);

        // Convert to string
        const queryString = params.toString();
        console.log('queryString :', queryString);

        // Step 2: Encode the URL parameters using Base64 encoding
        // Convert to binary string
        const binaryString = unescape(encodeURIComponent(queryString));

        // Convert binary string to Base64
        const base64Encoded = btoa(binaryString);

        console.log('Base64 Encoded URL Parameters:', base64Encoded);


        // // Function to decompress the parameters (simple implementation)
        // function decompressParams(compressedString) {
        //     const binaryString = atob(compressedString);
        //     const len = binaryString.length;
        //     const bytes = new Uint8Array(len);
        //     for (let i = 0; i < len; i++) {
        //         bytes[i] = binaryString.charCodeAt(i);
        //     }
        //     const decoder = new TextDecoder();
        //     const decompressedString = decoder.decode(bytes);
        //     const pairs = decompressedString.split('&');
        //     const params = {};
        //     pairs.forEach(pair => {
        //         const [key, value] = pair.split('=');
        //         params[decodeURIComponent(key)] = decodeURIComponent(value);
        //     });
        //     return params;
        // }

        // const decompressedParams = decompressParams(base64Encoded);
        // console.log("Decompressed Params data: ", decompressedParams);
    </script>
</body>
</html>
